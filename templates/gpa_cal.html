{% extends 'base.html' %}
{% block title %}GPA Calculator - Stephen X{% endblock %}
{% block content %}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<header class="w3-container bg-gradient-to-r from-yellow-400 via-red-500 to-pink-500 w3-center" style="padding:128px 12px">
    <h1 class="w3-margin w3-jumbo font-sans text-white font-extrabold"><span class="text-green-300">Epic GPA </span>Calculator</h1>
</header>

<div class ="w3-center w3-container bg-yellow-100" style="padding:256px 16px">
    <div class="text-center">
        <p class="w3-xlarge text-blue-500 font-bold xl:inline">Weighted GPA: {{GPA_w}}</p><br>
        <p class="w3-xlarge text-blue-400 font-bold xl:inline">Unweighted GPA: {{GPA_u}}</p>
    </div>
    
    <div id="grade-bar" class="bg-opacity-0 rounded-lg w-72 block p-4 m-auto">
        <div class="w-full h-4 shadow bg-gray-400 rounded-full mt-3">
            <div class="h-full text-center text-xs text-white bg-blue-500 rounded-full" style="width: {{pct_u}};">
                {{pct_u}}
            </div>
        </div>
        <div class="w-full h-4 shadow bg-gray-400 rounded-full mt-3">
            <div class="h-full text-center text-xs text-white bg-red-500 rounded-full" style="width: {{pct_w}};">
                {{pct_w}}
            </div>
        </div>
    </div>
    <form action="/GPAcal/" id="form" method = "post" style = "text-align:center;">
        {% csrf_token %}
        <div class="max-x-full m-auto">
        <div class="inline-block text-left space-y-3 ">
        <div id="classes" class="space-y-2">
            <div id="class-0" class = "m-auto">
                <input type="text" placeholder="Class name" style="width:40%;"class="inline-block max-w-md rounded-lg border-transparent flex-1 appearance-none border border-gray-300 w-full py-2 px-4 bg-white text-gray-700 placeholder-gray-400 shadow-sm text-base focus:outline-none focus:ring-2 focus:ring-purple-600 focus:border-transparent" id="class_name" name = "class_name">
                <select id="grade" class="inline-block m-auto w-24 text-gray-700 py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500" name="grade" required>
                    <option value="A+">A+</option>
                    <option value="A" selected="selected">A</option>
                    <option value="A-">A-</option>
                    <option value="B+">B+</option>
                    <option value="B">B</option>
                    <option value="B-">B-</option>
                    <option value="C+">C+</option>
                    <option value="C">C</option>
                    <option value="C-">C-</option>
                    <option value="D+">D+</option>
                    <option value="D">D</option>
                    <option value="D-">D-</option>
                    <option value="F">F</option>
                </select>
                <select id="class_type" class = "inline-block m-auto w-36 text-gray-700 py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"name="class_type" required>
                    <option value="AP/IB">AP/IB</option>
                    <option value="H">Honors</option>
                    <option value="C">College</option>
                    <option value="" selected="selected">Regular</option>
                </select>
                <button type="button" class="inline-block m-auto transform hover:scale-110 duration-200" onclick="deleteClass('class-0')"   id="delete_class">
                    <img class="pb-1 inline-block m-auto" src="https://stephenxie.me/images/delete.svg" height="40" width="40"/>
                </button>
            </div>
        </div>
                <button type="button" class = "py-2 px-4 bg-gradient-to-r from-green-400 to-blue-500 hover:from-green-500 hover:to-blue-600 text-white transition delay-100 duration-200 ease-in-out  text-center text-base font-semibold shadow-md focus:outline-none focus:ring-2 focus:ring-offset-2 rounded-lg"id="add_class">Add Class</button>
                <script>
                var counter = parseInt("1");
                $(function() {
                    $('#add_class').click(function(){
                        var newDiv = $(`<div id="class-${counter}" class = "m-auto"><input type="text" placeholder="Class name" style="width:40%;"class="inline-block max-w-md rounded-lg border-transparent flex-1 appearance-none border border-gray-300 w-full py-2 px-4 bg-white text-gray-700 placeholder-gray-400 shadow-sm text-base focus:outline-none focus:ring-2 focus:ring-purple-600 focus:border-transparent" id="class_name" name = "class_name"> <select id="grade" class="inline-block m-auto w-24 text-gray-700 py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500" name="grade" required><option value="A+">A+</option><option value="A" selected="selected">A</option><option value="A-">A-</option><option value="B+">B+</option><option value="B">B</option><option value="B-">B-</option><option value="C+">C+</option><option value="C">C</option><option value="C-">C-</option><option value="D+">D+</option><option value="D">D</option><option value="D-">D-</option><option value="F">F</option></select> <select id="class_type" class = "inline-block m-auto w-36 text-gray-700 py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"name="class_type" required><option value="AP/IB">AP/IB</option><option value="H">Honors</option><option value="C">College</option><option value="" selected="selected">Regular</option></select> <button type="button" class=" inline-block m-auto transform hover:scale-110 duration-200" onclick="deleteClass('class-${counter}')"   id="delete_class"><img class="pb-1 inline-block m-auto" src="https://stephenxie.me/images/delete.svg" height="40" width="40"/></button></div>`);
                    //newDiv.style.background = "#000";
                    $('#classes').append(newDiv);
                    counter+=1
                    });
                });
                </script>
                <script>
                    function deleteClass(id){
                        var myClass = document.getElementById(id);
                        myClass.remove();
                    }
                </script>
            </div>
        </div>
        <button class="py-2 px-3 bg-indigo-600 hover:bg-indigo-700 focus:ring-indigo-500 focus:ring-offset-indigo-200 text-white transition ease-in-out duration-300 delay-100 text-center text-base font-semibold shadow-md focus:outline-none focus:ring-2 focus:ring-offset-2  rounded-lg" type="submit">Submit</button>
    </form>
</div>
{% endblock %}